{% extends "base.html" %} {% block title %}
<title>用户个人信息</title>
{% endblock %} {% block css %} {{ super() }} {% endblock %} {% block header %} {{ super() }} {% endblock %} {% block main %}
<main>
    <a href="#" id="item_tag_">[商品标签]</a>
</main>
{% endblock %} {% block footer %} {{ super() }} {% endblock %} {% block js %} {{ super() }}

<script type="text/javascript" charset="utf-8">
    //var opt_userid = "{{ opt_userid|safe }}"; // 如果有python传过来的
    var opt_userid = {{ opt_userid }};
    console.log(opt_userid);
    console.log({{current_user.id}});
    var debug = 0;
    /*
    function my_func() {
        let a = 1;
        url = "/api/change_user_info";
        if (debug) url = `http://127.0.0.1:4523/mock/927026${url}`;
        $.ajax({
            // query形式
            url: url,
            type: "get",
            data: { key: value },
            async: false, // 当需要将值传给函数外部时需要强制同步
            success: function (ret) {
                a = 2;
            },
        });
        return a;
    }

    $(document).ready(function () {
        let url = "/api/get_user_info";
        if (debug) url = `http://127.0.0.1:4523/mock/927026${url}`;
        $.ajax({
            // json形式
            url: url,
            type: "post",
            data: JSON.stringify({ key: value }),
            contentType: "application/json;charset=utf-8",
            processData: false,
            success: function (ret) {
                $("#item_tag_").text(ret.something);
            },
        });
    });
    */
    $(document).ready(function () {
        let url = "/api/get_user_info";
        if (debug) url = `http://127.0.0.1:4523/mock/927026${url}`;
        $.ajax({
            url: url,
            type: "get",
            data:{user_id:opt_userid},
            success: function (ret) {
                console.log(ret);
            },
        });
    });
</script>

{% endblock %}
