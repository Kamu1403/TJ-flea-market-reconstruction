!function(a,b){"use strict";var c,d,e=b(a),f=!1,g=[],h={},i=[],j={timeout:10,buffer:100,loadingClass:"lazy-loading",srcValue:"lazy-src",bgValue:"lazy-bg"},k={_init:function(){c=this},listen:function(a,d,e){var k,l=a,m=(d||"img").toLowerCase();"object"!=(typeof a).toLowerCase()&&(l=b(a||"img["+j.srcValue+"]")),e&&(k=i.push(e)-1),"bat"===m&&(h[k]={objs:[],cbIndex:k}),l.each(function(){var a=b(this);g.push({type:m,obj:a,cbIndex:k}),"img"==m&&a.addClass(j.loadingClass)}),f||c._startListen(),c.detect()},_startListen:function(){e.bind("scroll.lazyelem resize.lazyelem",function(){g.length&&(clearTimeout(d),d=setTimeout(function(){c.detect()},j.timeout))}),f=!0},detect:function(){for(var a=0;a<g.length;a++){var b=g[a],d=b.obj,k=b.cbIndex;if(!c._isHidden(d)&&c._isTrigger(d)){switch(b.type){case"fn":break;case"img":var l=d.attr(j.srcValue);l&&d.attr("src",l).removeAttr(j.srcValue);break;case"bg":var m=d.attr(j.bgValue);m&&d.css("background-image","url("+m+")").removeAttr(j.bgValue);break;case"dom":var n=d.children("script");n.length&&n.replaceWith(c._minHtml(n.html()));break;case"bat":h[k].objs.push(d)}g.splice(a--,1),"bat"!==b.type&&k>=0&&i[k](d)}}c._bat(),0===g.length&&(e.unbind("scroll.lazyelem resize.lazyelem"),f=!1)},_bat:function(){for(var a in h){var b,c;h.hasOwnProperty(a)&&(b=h[a].objs,c=i[h[a].cbIndex],b.length&&(c(b),h[a].objs=[]))}},_isTrigger:function(a){var b=e.height(),c=e.scrollTop(),d=a.height(),f=a.offset().top;return f+d>c-j.buffer&&f<c+b+j.buffer},_isHidden:function(a){var c=a[0];return"none"!==a.css("display")&&b.contains(c.ownerDocument,c)?c.offsetWidth<=0&&c.offsetHeight<=0?!0:!1:!0},_minHtml:function(a){var b=/\n+/g,c=/<!--.*?-->/gi,d=/\/\*.*?\*\//gi,e=/[ ]+</gi;return a=a.replace(b,""),a=a.replace(c,""),a=a.replace(d,""),a=a.replace(e,"<")},config:function(a){b.extend(j,a)}};k._init(),a.lazyelem=k}(window,window.jQuery||window.Zepto);